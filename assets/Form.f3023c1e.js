import{l as e,m as n,t,n as r,q as a,s as l,v as i,x as o,y as u,z as c,S as s,C as v,D as f,E as d,F as h,G as m,H as p,I as g,J as b,c as y,K as w,M as x,N as F,d as k,O as C,b as j,P as $,Q as O,R as A,T as q,U as M,V as S,W as E,X as V,Y as P,Z as I,$ as T,a0 as B,a1 as W,a2 as R,a3 as _,a4 as L,a5 as H,a6 as N,a7 as D,a8 as z,a9 as X,aa as Y,ab as K,ac as G,ad as J,ae as Q,af as U,ag as Z,ah as ee,ai as ne,aj as te,ak as re,al as ae,a as le,r as ie,am as oe,an as ue,ao as ce,ap as se,aq as ve}from"./index.70334207.js";import{C as fe,R as de}from"./Col.bfbeb36b.js";import{_ as he}from"./toArray.834367be.js";import{u as me}from"./FormItemContext.90f1956e.js";import{i as pe}from"./useFlexGapSupport.229a03b0.js";var ge=Symbol("SizeProvider");function be(e){var n=function(e){return e?Infinity===(e=t(e))||-Infinity===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),r=n%1;return n==n?r?n-r:n:0}function ye(e){return null==e?[]:Array.isArray(e)?e:[e]}function we(e,n){for(var t=e,r=0;r<n.length;r+=1){if(null==t)return;t=t[n[r]]}return t}function xe(e,n,t,l){if(!n.length)return t;var i,o=he(n),u=o[0],c=o.slice(1);return i=e||"number"!=typeof u?Array.isArray(e)?r(e):a({},e):[],l&&void 0===t&&1===c.length?delete i[u][c[0]]:i[u]=xe(i[u],c,t,l),i}function Fe(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.length&&r&&void 0===t&&!we(e,n.slice(0,-1))?e:xe(e,n,t,r)}function ke(e){return ye(e)}function Ce(e){return"object"===l(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function je(e,n){var t=Array.isArray(e)?r(e):a({},e);return n?(Object.keys(n).forEach((function(e){var r=t[e],a=n[e],l=Ce(r)&&Ce(a);t[e]=l?je(r,a||{}):a})),t):t}function $e(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t.reduce((function(e,n){return je(e,n)}),e)}function Oe(e,n){var t={};return n.forEach((function(n){var r=function(e,n){return we(e,n)}(e,n);t=function(e,n,t){return Fe(e,n,t,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(t,n,r)})),t}var Ae="'${name}' is not a valid ${type}",qe={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ae,method:Ae,array:Ae,object:Ae,number:Ae,date:Ae,boolean:Ae,integer:Ae,float:Ae,regexp:Ae,email:Ae,url:Ae,hex:Ae},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Me=globalThis&&globalThis.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,l){function i(e){try{u(r.next(e))}catch(n){l(n)}}function o(e){try{u(r.throw(e))}catch(n){l(n)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,o)}u((r=r.apply(e,n||[])).next())}))},Se=s;function Ee(e,n){return e.replace(/\$\{\w+\}/g,(function(e){var t=e.slice(2,-1);return n[t]}))}function Ve(e,n,t,l,s){return Me(this,void 0,void 0,i.mark((function v(){var f,d,h,m,p,g,b,y;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return delete(f=a({},t)).ruleIndex,delete f.trigger,d=null,f&&"array"===f.type&&f.defaultField&&(d=f.defaultField,delete f.defaultField),h=new Se(c({},e,[f])),m=$e({},qe,l.validateMessages),h.messages(m),p=[],i.prev=9,i.next=12,Promise.resolve(h.validate(c({},e,n),a({},l)));case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(9),p=i.t0.errors?i.t0.errors.map((function(e,n){var t=e.message;return o(t)?u(t,{key:"error_".concat(n)}):t})):[m.default()];case 17:if(p.length||!d){i.next=22;break}return i.next=20,Promise.all(n.map((function(n,t){return Ve("".concat(e,".").concat(t),n,d,l,s)})));case 20:return g=i.sent,i.abrupt("return",g.reduce((function(e,n){return[].concat(r(e),r(n))}),[]));case 22:return b=a(a(a({},t),{name:e,enum:(t.enum||[]).join(", ")}),s),y=p.map((function(e){return"string"==typeof e?Ee(e,b):e})),i.abrupt("return",y);case 25:case"end":return i.stop()}}),v,null,[[9,14]])})))}function Pe(e,n,t,l,o,u){var c,s=this,v=e.join("."),f=t.map((function(e,n){var t=e.validator,r=a(a({},e),{ruleIndex:n});return t&&(r.validator=function(e,n,r){var a=!1,l=t(e,n,(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];Promise.resolve().then((function(){a||r.apply(void 0,n)}))}));(a=l&&"function"==typeof l.then&&"function"==typeof l.catch)&&l.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,n){var t=e.warningOnly,r=e.ruleIndex,a=n.warningOnly,l=n.ruleIndex;return!!t==!!a?r-l:t?1:-1}));if(!0===o)c=new Promise((function(e,t){return Me(s,void 0,void 0,i.mark((function r(){var a,o,c;return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=0;case 1:if(!(a<f.length)){r.next=12;break}return o=f[a],r.next=5,Ve(v,n,o,l,u);case 5:if(!(c=r.sent).length){r.next=9;break}return t([{errors:c,rule:o}]),r.abrupt("return");case 9:a+=1,r.next=1;break;case 12:e([]);case 13:case"end":return r.stop()}}),r)})))}));else{var d=f.map((function(e){return Ve(v,n,e,l,u).then((function(n){return{errors:n,rule:e}}))}));c=(o?function(e){return Me(this,void 0,void 0,i.mark((function n(){var t;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=0,n.abrupt("return",new Promise((function(n){e.forEach((function(r){r.then((function(r){r.errors.length&&n([r]),(t+=1)===e.length&&n([])}))}))})));case 2:case"end":return n.stop()}}),n)})))}(d):function(e){return Me(this,void 0,void 0,i.mark((function n(){return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.all(e).then((function(e){var n;return(n=[]).concat.apply(n,r(e))})));case 1:case"end":return n.stop()}}),n)})))}(d)).then((function(e){return Promise.reject(e)}))}return c.catch((function(e){return e})),c}var Ie,Te=Math.max;const Be=(Ie=function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var a=null==t?0:be(t);return a<0&&(a=Te(r+a,0)),h(e,f(n),a)},function(e,n,t){var r=Object(e);if(!v(e)){var a=f(n);e=d(e),n=function(e){return a(r[e],e,r)}}var l=Ie(e,n,t);return l>-1?r[a?e[l]:l]:void 0});var We=Symbol("formContextKey"),Re=function(e){m(We,e)},_e=function(){return n(We,{name:e((function(){})),labelAlign:e((function(){return"right"})),vertical:e((function(){return!1})),addField:function(e,n){},removeField:function(e){},model:e((function(){})),rules:e((function(){})),colon:e((function(){})),labelWrap:e((function(){})),labelCol:e((function(){})),requiredMark:e((function(){return!1})),validateTrigger:e((function(){})),onValidate:function(){},validateMessages:e((function(){return qe}))})},Le=Symbol("formItemPrefixContextKey"),He=function(e,n){var t,r,l,i,o,u,s=n.slots,v=n.emit,f=n.attrs,d=a(a({},e),f),h=d.prefixCls,m=d.htmlFor,k=d.labelCol,C=d.labelAlign,j=d.colon,$=d.required,O=d.requiredMark,A=p("Form"),q=g(A,1)[0],M=null!==(r=e.label)&&void 0!==r?r:null===(l=s.label)||void 0===l?void 0:l.call(s);if(!M)return null;var S=_e(),E=S.vertical,V=S.labelAlign,P=S.labelCol,I=S.labelWrap,T=S.colon,B=k||(null==P?void 0:P.value)||{},W=C||(null==V?void 0:V.value),R="".concat(h,"-item-label"),_=b(R,"left"===W&&"".concat(R,"-left"),B.class,c({},"".concat(R,"-wrap"),!!I.value)),L=M,H=!0===j||!1!==(null==T?void 0:T.value)&&!1!==j;H&&!E.value&&"string"==typeof M&&""!==M.trim()&&(L=M.replace(/[:|ï¼š]\s*$/,"")),L=y(w,null,[L,null===(i=s.tooltip)||void 0===i?void 0:i.call(s,{class:"".concat(h,"-item-tooltip")})]),"optional"!==O||$||(L=y(w,null,[L,y("span",{class:"".concat(h,"-item-optional")},[(null===(o=q.value)||void 0===o?void 0:o.optional)||(null===(u=x.Form)||void 0===u?void 0:u.optional)])]));var N=b((c(t={},"".concat(h,"-item-required"),$),c(t,"".concat(h,"-item-required-mark-optional"),"optional"===O),c(t,"".concat(h,"-item-no-colon"),!H),t));return y(fe,F(F({},B),{},{class:_}),{default:function(){return[y("label",{for:m,class:N,title:"string"==typeof M?M:"",onClick:function(e){return v("click",e)}},[L])]}})};He.displayName="FormItemLabel",He.inheritAttrs=!1;const Ne=He,De=k({name:"ErrorList",props:["errors","help","onDomErrorVisibleChange","helpStatus","warnings"],setup:function(t){var r=C("",t).prefixCls,a=n(Le,{prefixCls:e((function(){return""}))}),l=a.prefixCls,i=a.status,o=e((function(){return"".concat(l.value,"-item-explain")})),u=e((function(){return!(!t.errors||!t.errors.length)})),c=j(i.value);return $([u,i],(function(){u.value&&(c.value=i.value)})),function(){var e,n,a=O("".concat(r.value,"-show-help-item")),l=A("".concat(r.value,"-show-help-item"),a);return l.class=o.value,(null===(e=t.errors)||void 0===e?void 0:e.length)?y(q,F(F({},l),{},{tag:"div"}),{default:function(){return[null===(n=t.errors)||void 0===n?void 0:n.map((function(e,n){return y("div",{key:n,role:"alert",class:c.value?"".concat(o.value,"-").concat(c.value):""},[e])}))]}}):null}}});var ze={success:M,warning:S,error:E,validating:V};const Xe=k({slots:["help","extra","errors"],inheritAttrs:!1,props:["prefixCls","errors","hasFeedback","onDomErrorVisibleChange","wrapperCol","help","extra","status"],setup:function(n,t){var r,l=t.slots,i=_e(),o=i.wrapperCol,u=a({},i);return delete u.labelCol,delete u.wrapperCol,Re(u),r={prefixCls:e((function(){return n.prefixCls})),status:e((function(){return n.status}))},m(Le,r),function(){var e,t,r,a=n.prefixCls,i=n.wrapperCol,u=n.help,c=void 0===u?null===(e=l.help)||void 0===e?void 0:e.call(l):u,s=n.errors,v=void 0===s?null===(t=l.errors)||void 0===t?void 0:t.call(l):s,f=n.hasFeedback,d=n.status,h=n.extra,m=void 0===h?null===(r=l.extra)||void 0===r?void 0:r.call(l):h,p="".concat(a,"-item"),g=i||(null==o?void 0:o.value)||{},x=b("".concat(p,"-control"),g.class),k=d&&ze[d];return y(fe,F(F({},g),{},{class:x}),{default:function(){var e;return y(w,null,[y("div",{class:"".concat(p,"-control-input")},[y("div",{class:"".concat(p,"-control-input-content")},[null===(e=l.default)||void 0===e?void 0:e.call(l)]),f&&k?y("span",{class:"".concat(p,"-children-icon")},[y(k,null,null)]):null]),y(De,{errors:v,help:c,class:"".concat(p,"-explain-connected")},null),m?y("div",{class:"".concat(p,"-extra")},[m]):null])}})}}});function Ye(e,n,t){var r=e,a=n,l=0;try{for(var i=a.length;l<i-1&&(r||t);++l){var o=a[l];if(!(o in r)){if(t)throw Error("please transfer a valid name path to form item!");break}r=r[o]}if(t&&!r)throw Error("please transfer a valid name path to form item!")}catch(u){}return{o:r,k:a[l],v:r?r[a[l]]:void 0}}_("success","warning","error","validating","");var Ke=0;const Ge=k({name:"AFormItem",inheritAttrs:!1,__ANT_NEW_FORM_ITEM:!0,props:{htmlFor:String,prefixCls:String,label:L.any,help:L.any,extra:L.any,labelCol:{type:Object},wrapperCol:{type:Object},hasFeedback:{type:Boolean,default:!1},colon:{type:Boolean,default:void 0},labelAlign:L.oneOf(_("left","right")),prop:{type:[String,Number,Array]},name:{type:[String,Number,Array]},rules:[Array,Object],autoLink:{type:Boolean,default:!0},required:{type:Boolean,default:void 0},validateFirst:{type:Boolean,default:void 0},validateStatus:L.oneOf(_("","success","warning","error","validating")),validateTrigger:{type:[String,Array]},messageVariables:{type:Object},hidden:Boolean,noStyle:Boolean},slots:["help","label","extra"],setup:function(n,t){var r=t.slots,l=t.attrs,i=t.expose;T(void 0===n.prop);var o="form-item-".concat(++Ke),u=C("form",n).prefixCls,s=_e(),v=e((function(){return n.name||n.prop})),f=j([]),d=j(!1),h=j(),m=e((function(){return ke(v.value)})),p=e((function(){if(m.value.length){var e=s.name.value,n=m.value.join("_");return e?"".concat(e,"_").concat(n):"".concat("form_item","_").concat(n)}})),g=e((function(){return(e=s.model.value)&&v.value?Ye(e,m.value,!0).v:void 0;var e})),b=j(B(g.value)),x=e((function(){var e=void 0!==n.validateTrigger?n.validateTrigger:s.validateTrigger.value;return ye(e=void 0===e?"change":e)})),k=e((function(){var e=s.rules.value,t=n.rules,r=void 0!==n.required?{required:!!n.required,trigger:x.value}:[],a=Ye(e,m.value);e=e?a.o[a.k]||a.v:[];var l=[].concat(t||e||[]);return Be(l,(function(e){return e.required}))?l:l.concat(r)})),O=e((function(){var e=k.value,t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t||n.required})),A=j();I((function(){A.value=n.validateStatus}));var q=e((function(){var e={};return"string"==typeof n.label?e.label=n.label:n.name&&(e.label=String(name)),n.messageVariables&&(e=a(a({},e),n.messageVariables)),e})),M=function(e){if(0!==m.value.length){var t=n.validateFirst,r=void 0!==t&&t,l=(e||{}).triggerName,i=k.value;if(l&&(i=i.filter((function(e){var n=e.trigger;return!n&&!x.value.length||ye(n||x.value).includes(l)}))),!i.length)return Promise.resolve();var o=Pe(m.value,g.value,i,a({validateMessages:s.validateMessages.value},e),r,q.value);return A.value="validating",f.value=[],o.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("validating"===A.value){var n=e.filter((function(e){return e&&e.errors.length}));A.value=n.length?"error":"success",f.value=n.map((function(e){return e.errors})),s.onValidate(v.value,!f.value.length,f.value.length?N(f.value[0]):null)}})),o}},S=function(){M({triggerName:"blur"})},E=function(){d.value?d.value=!1:M({triggerName:"change"})},V=function(){A.value=n.validateStatus,d.value=!1,f.value=[]},_=function(){A.value=n.validateStatus,d.value=!0,f.value=[];var e=s.model.value||{},t=g.value,r=Ye(e,m.value,!0);Array.isArray(t)?r.o[r.k]=[].concat(b.value):r.o[r.k]=b.value,H((function(){d.value=!1}))},L=e((function(){return void 0===n.htmlFor?p.value:n.htmlFor})),D=function(){var e=L.value;if(e&&h.value){var n=h.value.$el.querySelector('[id="'.concat(e,'"]'));n&&n.focus&&n.focus()}};i({onFieldBlur:S,onFieldChange:E,clearValidate:V,resetField:_}),me({id:p,onFieldBlur:function(){n.autoLink&&S()},onFieldChange:function(){n.autoLink&&E()},clearValidate:V},e((function(){return!!(n.autoLink&&s.model.value&&v.value)})));var z=!1;$(v,(function(e){e?z||(z=!0,s.addField(o,{fieldValue:g,fieldId:p,fieldName:v,resetField:_,clearValidate:V,namePath:m,validateRules:M,rules:k})):(z=!1,s.removeField(o))}),{immediate:!0}),W((function(){s.removeField(o)}));var X,Y,K,G=(Y=P((X=f).value.slice()),K=null,I((function(){clearTimeout(K),K=setTimeout((function(){Y.value=X.value}),X.value.length?0:10)})),Y),J=e((function(){return void 0!==n.validateStatus?n.validateStatus:G.value.length?"error":A.value})),Q=e((function(){var e;return c(e={},"".concat(u.value,"-item"),!0),c(e,"".concat(u.value,"-item-has-feedback"),J.value&&n.hasFeedback),c(e,"".concat(u.value,"-item-has-success"),"success"===J.value),c(e,"".concat(u.value,"-item-has-warning"),"warning"===J.value),c(e,"".concat(u.value,"-item-has-error"),"error"===J.value),c(e,"".concat(u.value,"-item-is-validating"),"validating"===J.value),c(e,"".concat(u.value,"-item-hidden"),n.hidden),e}));return function(){var e,t;if(n.noStyle)return null===(e=r.default)||void 0===e?void 0:e.call(r);var a=null!==(t=n.help)&&void 0!==t?t:r.help?R(r.help()):null;return y(de,F(F({},l),{},{class:[Q.value,null!=a||G.value.length?"".concat(u.value,"-item-with-help"):"",l.class],key:"row"}),{default:function(){var e,t,l,i;return y(w,null,[y(Ne,F(F({},n),{},{htmlFor:L.value,required:O.value,requiredMark:s.requiredMark.value,prefixCls:u.value,onClick:D,label:null!==(e=n.label)&&void 0!==e?e:null===(t=r.label)||void 0===t?void 0:t.call(r)}),null),y(Xe,F(F({},n),{},{errors:null!=a?ye(a):G.value,prefixCls:u.value,status:J.value,ref:h,help:a,extra:null!==(l=n.extra)&&void 0!==l?l:null===(i=r.extra)||void 0===i?void 0:i.call(r)}),{default:r.default})])}})}}});function Je(e){var n=!1,t=e.length,r=[];return e.length?new Promise((function(a,l){e.forEach((function(e,i){e.catch((function(e){return n=!0,e})).then((function(e){t-=1,r[i]=e,t>0||(n&&l(r),a(r))}))}))})):Promise.resolve([])}function Qe(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Ue(e,n){return(!n||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Ze(e,n){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return Ue(t.overflowY,n)||Ue(t.overflowX,n)||!!(a=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(n){return null}}(r=e))&&(a.clientHeight<r.scrollHeight||a.clientWidth<r.scrollWidth)}var r,a;return!1}function en(e,n,t,r,a,l,i,o){return l<e&&i>n||l>e&&i<n?0:l<=e&&o<=t||i>=n&&o>=t?l-e-r:i>n&&o<t||l<e&&o>t?i-n+a:0}function nn(e,n){var t=window,r=n.scrollMode,a=n.block,l=n.inline,i=n.boundary,o=n.skipOverflowHiddenElements,u="function"==typeof i?i:function(e){return e!==i};if(!Qe(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,s=[],v=e;Qe(v)&&u(v);){if((v=v.parentElement)===c){s.push(v);break}null!=v&&v===document.body&&Ze(v)&&!Ze(document.documentElement)||null!=v&&Ze(v,o)&&s.push(v)}for(var f=t.visualViewport?t.visualViewport.width:innerWidth,d=t.visualViewport?t.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,p=e.getBoundingClientRect(),g=p.height,b=p.width,y=p.top,w=p.right,x=p.bottom,F=p.left,k="start"===a||"nearest"===a?y:"end"===a?x:y+g/2,C="center"===l?F+b/2:"end"===l?w:F,j=[],$=0;$<s.length;$++){var O=s[$],A=O.getBoundingClientRect(),q=A.height,M=A.width,S=A.top,E=A.right,V=A.bottom,P=A.left;if("if-needed"===r&&y>=0&&F>=0&&x<=d&&w<=f&&y>=S&&x<=V&&F>=P&&w<=E)return j;var I=getComputedStyle(O),T=parseInt(I.borderLeftWidth,10),B=parseInt(I.borderTopWidth,10),W=parseInt(I.borderRightWidth,10),R=parseInt(I.borderBottomWidth,10),_=0,L=0,H="offsetWidth"in O?O.offsetWidth-O.clientWidth-T-W:0,N="offsetHeight"in O?O.offsetHeight-O.clientHeight-B-R:0;if(c===O)_="start"===a?k:"end"===a?k-d:"nearest"===a?en(m,m+d,d,B,R,m+k,m+k+g,g):k-d/2,L="start"===l?C:"center"===l?C-f/2:"end"===l?C-f:en(h,h+f,f,T,W,h+C,h+C+b,b),_=Math.max(0,_+m),L=Math.max(0,L+h);else{_="start"===a?k-S-B:"end"===a?k-V+R+N:"nearest"===a?en(S,V,q,B,R+N,k,k+g,g):k-(S+q/2)+N/2,L="start"===l?C-P-T:"center"===l?C-(P+M/2)+H/2:"end"===l?C-E+W+H:en(P,E,M,T,W+H,C,C+b,b);var D=O.scrollLeft,z=O.scrollTop;k+=z-(_=Math.max(0,Math.min(z+_,O.scrollHeight-q+N))),C+=D-(L=Math.max(0,Math.min(D+L,O.scrollWidth-M+H)))}j.push({el:O,top:_,left:L})}return j}function tn(e){return e===Object(e)&&0!==Object.keys(e).length}function rn(e,n){var t=e.isConnected||e.ownerDocument.documentElement.contains(e);if(tn(n)&&"function"==typeof n.behavior)return n.behavior(t?nn(e,n):[]);if(t){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:tn(e)?e:{block:"start",inline:"nearest"}}(n);return function(e,n){void 0===n&&(n="auto");var t="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,l=e.left;r.scroll&&t?r.scroll({top:a,left:l,behavior:n}):(r.scrollTop=a,r.scrollLeft=l)}))}(nn(e,r),r.behavior)}}var an=Math.min;function ln(e){return J(e)?e:[]}const on=Q((function(e){var n=D(e,ln);return n.length&&n[0]===e[0]?function(e,n,t){for(var r=t?K:G,a=e[0].length,l=e.length,i=l,o=Array(l),u=Infinity,c=[];i--;){var s=e[i];i&&n&&(s=D(s,z(n))),u=an(s.length,u),o[i]=!t&&(n||a>=120&&s.length>=120)?new X(i&&s):void 0}s=e[0];var v=-1,f=o[0];e:for(;++v<a&&c.length<u;){var d=s[v],h=n?n(d):d;if(d=t||0!==d?d:0,!(f?Y(f,h):r(c,h,t))){for(i=l;--i;){var m=o[i];if(!(m?Y(m,h):r(e[i],h,t)))continue e}f&&f.push(h),c.push(d)}}return c}(n):[]}));function un(e,n){return n.length<2?e:U(e,function(e,n,t){var r=-1,a=e.length;n<0&&(n=-n>a?0:a+n),(t=t>a?a:t)<0&&(t+=a),a=n>t?0:t-n>>>0,n>>>=0;for(var l=Array(a);++r<a;)l[r]=e[r+n];return l}(n,0,-1))}function cn(e,n){return null==(e=un(e,n=Z(n,e)))||delete e[ee((t=n,r=null==t?0:t.length,r?t[r-1]:void 0))];var t,r}function sn(e){return pe(e)?void 0:e}const vn=ne((function(e,n){var t={};if(null==e)return t;var r=!1;n=D(n,(function(n){return n=Z(n,e),r||(r=n.length>1),n})),te(e,re(e),t),r&&(t=ae(t,7,sn));for(var a=n.length;a--;)cn(t,n[a]);return t}));function fn(e){var n=!1;return e&&e.length&&e.every((function(e){return!e.required||(n=!0,!1)})),n}function dn(e){return null==e?[]:Array.isArray(e)?e:[e]}function hn(e,n,t){for(var r=e,a=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),l=0,i=a.length;l<i-1&&(r||t);++l){var o=a[l];if(!(o in r)){if(t)throw new Error("please transfer a valid name path to validate!");break}r=r[o]}return{o:r,k:a[l],v:r?r[a[l]]:null,isValid:r&&a[l]in r}}const mn=k({name:"AForm",inheritAttrs:!1,props:ce({layout:L.oneOf(_("horizontal","inline","vertical")),labelCol:{type:Object},wrapperCol:{type:Object},colon:{type:Boolean,default:void 0},labelAlign:L.oneOf(_("left","right")),labelWrap:{type:Boolean,default:void 0},prefixCls:String,requiredMark:{type:[String,Boolean],default:void 0},hideRequiredMark:{type:Boolean,default:void 0},model:L.object,rules:{type:Object},validateMessages:{type:Object,default:void 0},validateOnRuleChange:{type:Boolean,default:void 0},scrollToFirstError:{type:[Boolean,Object]},onSubmit:Function,name:String,validateTrigger:{type:[String,Array]},size:{type:String},onValuesChange:{type:Function},onFieldsChange:{type:Function},onFinish:{type:Function},onFinishFailed:{type:Function},onValidate:{type:Function}},{layout:"horizontal",hideRequiredMark:!1,colon:!0}),Item:Ge,useForm:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j({}),t=arguments.length>2?arguments[2]:void 0,l=B(le(e)),i=ie({}),o=P([]),u=function(t){a(le(e),a(a({},B(l)),t)),H((function(){Object.keys(i).forEach((function(e){i[e]={autoLink:!1,required:fn(le(n)[e])}}))}))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return n.length?e.filter((function(e){var t=dn(e.trigger||"change");return on(t,n).length})):e},s=null,v=function(t){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,i=[],o={},u=function(u){var s=t[u],v=hn(le(e),s,l);if(!v.isValid)return"continue";o[s]=v.v;var d=c(le(n)[s],dn(a&&a.trigger));d.length&&i.push(f(s,v.v,d,a||{}).then((function(){return{name:s,errors:[],warnings:[]}})).catch((function(e){var n=[],t=[];return e.forEach((function(e){var a=e.rule.warningOnly,l=e.errors;a?t.push.apply(t,r(l)):n.push.apply(n,r(l))})),n.length?Promise.reject({name:s,errors:n,warnings:t}):{name:s,errors:n,warnings:t}})))},v=0;v<t.length;v++)u(v);var d=Je(i);s=d;var h=d.then((function(){return s===d?Promise.resolve(o):Promise.reject([])})).catch((function(e){var n=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:o,errorFields:n,outOfDate:s!==d})}));return h.catch((function(e){return e})),h},f=function(e,n,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Pe([e],n,r,a({validateMessages:qe},l),!!l.validateFirst);return i[e]?(i[e].validateStatus="validating",o.catch((function(e){return e})).then((function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("validating"===i[e].validateStatus){var a=r.filter((function(e){return e&&e.errors.length}));i[e].validateStatus=a.length?"error":"success",i[e].help=a.length?a.map((function(e){return e.errors})):null,null===(n=null==t?void 0:t.onValidate)||void 0===n||n.call(t,e,!a.length,a.length?N(i[e].help[0]):null)}})),o):o.catch((function(e){return e}))},d=function(e,n){var t=[],r=!0;e?t=Array.isArray(e)?e:[e]:(r=!1,t=o.value);var a=v(t,n||{},r);return a.catch((function(e){return e})),a},h=function(e){(e?Array.isArray(e)?e:[e]:o.value).forEach((function(e){i[e]&&a(i[e],{validateStatus:"",help:null})}))},m=function(e){for(var n={autoLink:!1},t=[],r=Array.isArray(e)?e:[e],a=0;a<r.length;a++){var l=r[a];"error"===(null==l?void 0:l.validateStatus)&&(n.validateStatus="error",l.help&&t.push(l.help)),n.required=n.required||(null==l?void 0:l.required)}return n.help=t,n},p=l,g=!0,b=function(e){var n=[];o.value.forEach((function(r){var a=hn(e,r,!1),l=hn(p,r,!1);!(g&&(null==t?void 0:t.immediate)&&a.isValid)&&ue(a.v,l.v)||n.push(r)})),d(n,{trigger:"change"}),g=!1,p=B(N(e))},y=null==t?void 0:t.debounce,w=!0;return $(n,(function(){o.value=n?Object.keys(le(n)):[],!w&&t&&t.validateOnRuleChange&&d(),w=!1}),{deep:!0,immediate:!0}),$(o,(function(){var e={};for(var t in o.value.forEach((function(t){e[t]=a({},i[t],{autoLink:!1,required:fn(le(n)[t])}),delete i[t]})),i)Object.prototype.hasOwnProperty.call(i,t)&&delete i[t];a(i,e)}),{immediate:!0}),$(e,y&&y.wait?oe(b,y.wait,vn(y,["wait"])):b,{immediate:t&&!!t.immediate,deep:!0}),{modelRef:e,rulesRef:n,initialModel:l,validateInfos:i,resetFields:u,validate:d,validateField:f,mergeValidateInfo:m,clearValidate:h}},setup:function(t,i){var o=i.emit,u=i.slots,s=i.expose,v=i.attrs,f=function(t){return t?e((function(){return t.size})):n(ge,e((function(){return"default"})))}(t),d=C("form",t),h=d.prefixCls,m=d.direction,p=d.form,g=e((function(){return""===t.requiredMark||t.requiredMark})),w=e((function(){var e;return void 0!==g.value?g.value:p&&void 0!==(null===(e=p.value)||void 0===e?void 0:e.requiredMark)?p.value.requiredMark:!t.hideRequiredMark})),x=e((function(){var e,n;return null!==(e=t.colon)&&void 0!==e?e:null===(n=p.value)||void 0===n?void 0:n.colon})),k=se().validateMessages,O=e((function(){return a(a(a({},qe),k.value),t.validateMessages)})),A=e((function(){var e;return b(h.value,(c(e={},"".concat(h.value,"-").concat(t.layout),!0),c(e,"".concat(h.value,"-hide-required-mark"),!1===w.value),c(e,"".concat(h.value,"-rtl"),"rtl"===m.value),c(e,"".concat(h.value,"-").concat(f.value),f.value),e))})),q=j(),M={},S=function(e){var n=!!e,t=n?ye(e).map(ke):[];return n?Object.values(M).filter((function(e){return t.findIndex((function(n){return t=n,r=e.fieldName.value,ue(ye(t),ye(r));var t,r}))>-1})):Object.values(M)},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=S(e?[e]:void 0);if(t.length){var r=t[0].fieldId.value,l=r?document.getElementById(r):null;l&&rn(l,a({scrollMode:"if-needed",block:"nearest"},n))}},V=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!0===e){var n=[];return Object.values(M).forEach((function(e){var t=e.namePath;n.push(t.value)})),Oe(t.model,n)}return Oe(t.model,e)},P=function(e,n){if(ve(!(e instanceof Function),"Form","validateFields/validateField/validate not support callback, please use promise instead"),!t.model)return ve(!1,"Form","model is required for validateFields to work."),Promise.reject("Form `model` is required for validateFields to work.");var l=!!e,i=l?ye(e).map(ke):[],o=[];Object.values(M).forEach((function(e){var t;if(l||i.push(e.namePath.value),null===(t=e.rules)||void 0===t?void 0:t.value.length){var u=e.namePath.value;if(!l||function(e,n){return e&&e.some((function(e){return function(e,n){return!(!e||!n||e.length!==n.length)&&e.every((function(e,t){return n[t]===e}))}(e,n)}))}(i,u)){var c=e.validateRules(a({validateMessages:O.value},n));o.push(c.then((function(){return{name:u,errors:[],warnings:[]}})).catch((function(e){var n=[],t=[];return e.forEach((function(e){var a=e.rule.warningOnly,l=e.errors;a?t.push.apply(t,r(l)):n.push.apply(n,r(l))})),n.length?Promise.reject({name:u,errors:n,warnings:t}):{name:u,errors:n,warnings:t}})))}}}));var u=Je(o);q.value=u;var c=u.then((function(){return q.value===u?Promise.resolve(V(i)):Promise.reject([])})).catch((function(e){var n=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:V(i),errorFields:n,outOfDate:q.value!==u})}));return c.catch((function(e){return e})),c},I=function(){return P.apply(void 0,arguments)},T=function(e){(e.preventDefault(),e.stopPropagation(),o("submit",e),t.model)&&P().then((function(e){o("finish",e)})).catch((function(e){!function(e){var n=t.scrollToFirstError;if(o("finishFailed",e),n&&e.errorFields.length){var r={};"object"===l(n)&&(r=n),E(e.errorFields[0].name,r)}}(e)}))};return s({resetFields:function(e){t.model?S(e).forEach((function(e){e.resetField()})):ve(!1,"Form","model is required for resetFields to work.")},clearValidate:function(e){S(e).forEach((function(e){e.clearValidate()}))},validateFields:P,getFieldsValue:V,validate:function(){return I.apply(void 0,arguments)},scrollToField:E}),Re({model:e((function(){return t.model})),name:e((function(){return t.name})),labelAlign:e((function(){return t.labelAlign})),labelCol:e((function(){return t.labelCol})),labelWrap:e((function(){return t.labelWrap})),wrapperCol:e((function(){return t.wrapperCol})),vertical:e((function(){return"vertical"===t.layout})),colon:x,requiredMark:w,validateTrigger:e((function(){return t.validateTrigger})),rules:e((function(){return t.rules})),addField:function(e,n){M[e]=n},removeField:function(e){delete M[e]},onValidate:function(e,n,t){o("validate",e,n,t)},validateMessages:O}),$((function(){return t.rules}),(function(){t.validateOnRuleChange&&P()})),function(){var e;return y("form",F(F({},v),{},{onSubmit:T,class:[A.value,v.class]}),[null===(e=u.default)||void 0===e?void 0:e.call(u)])}}});export{Ge as A,mn as F};
